(()=>{"use strict";let t=null;const e=e=>{t=e,t(),t=null};class s{constructor(){this.subscribers=[]}subscribe(){t&&!this.subscribers.includes(t)&&this.subscribers.push(t)}notify(){this.subscribers.forEach((t=>t()))}}class r{constructor({target:t,state:s}){this.$target=t,this.$state=s,this.setHtml(),this.bindEvent(),e((()=>{this.setHtml()}))}setState(t){this.$state={...this.$state,...t},this.setHtml()}setHtml(){this.$target.innerHTML=this.render(),this.mounted()}render(){return""}mounted(){}bindEvent(){}}const n=(t=15)=>{const e=255,s=t=>{const e=t.toString(16);return e.length>1?e:`0${e}`};return[...Array.from({length:e/t},((e,s)=>s*t)).map((t=>`#FF${s(t)}00`)),...Array.from({length:e/t},((s,r)=>(e/t-r)*t)).map((t=>`#${s(t)}FF00`)),...Array.from({length:e/t},((e,s)=>s*t)).map((t=>`#00FF${s(t)}`)),...Array.from({length:e/t},((s,r)=>(e/t-r)*t)).map((t=>`#00${s(t)}FF`)),...Array.from({length:e/t},((e,s)=>s*t)).map((t=>`#${s(t)}00FF`))]},i=t=>t.map(((t,e,s)=>{const r=Math.floor(Math.random()*s.length);return s[e]=s[r],s[r]=t,s}))[0],o="STICK_LENGTH",a="SHUFFED_LIST",h=new class{constructor({state:t,mutations:e,actions:r}){this.state=t,this.$mutations=e,this.$actions=r,Object.keys(t).forEach((e=>{let r=t[e];const n=new s;Object.defineProperty(t,e,{get:()=>(n.subscribe(),r),set(t){r!==t&&JSON.stringify(r)!==JSON.stringify(t)&&(r=t,n.notify())}})}))}commit(t,e){this.$mutations[t](this.state,e)}dispatch(t,e){this.$actions[t]({state:this.state,commit:this.commit.bind(this),dispatch:this.dispatch.bind(this)},e)}}({state:{sortType:"select",stickLength:0,shuffledList:[]},mutations:{SET_SORTTYPE(t,e){t.sortType=e},[o](t,e){t.stickLength=e},[a](t,e){t.shuffledList=e}},actions:{}});class c extends r{constructor({target:t}){const e=n(),s=e.length,r=i(Array.from({length:s},((t,e)=>e+1))),c={rainbowColors:e};h.commit(o,r.length),h.commit(a,r),super({target:t,state:c})}render(){const t=h.state.shuffledList,{rainbowColors:e}=this.$state;return`\n      ${t.map((t=>{return`<span class="stick" style=${s=e[t-1],r=t,`"background-color:${s}; height:${2*r}px"`}></span>`;var s,r})).join("")}\n    `}}const u=t=>new Promise((e=>setTimeout(e,t)));class l{constructor(){this.swparr=[],this.subarr=[]}run(t){}}class d extends l{run(t){const e=t.length;for(let s=0;s<e-1;s++)for(let r=s+1;r<e;r++)t[s]>t[r]&&([t[s],t[r]]=[t[r],t[s]],this.swparr.push({e1:s,e2:r}));return this.swparr}}class p extends l{run(t){const e=t.length;for(let s=1;s<e;s++)for(let e=s;e>0;e--)t[e]<t[e-1]&&([t[e],t[e-1]]=[t[e-1],t[e]],this.swparr.push({e1:e,e2:e-1}));return this.swparr}}class f extends l{run(t){const e=t.length;for(let s=1;s<=e-1;s++)for(let r=0;r<e-s;r++)t[r]>t[r+1]&&([t[r],t[r+1]]=[t[r+1],t[r]],this.swparr.push({e1:r,e2:r+1}));return this.swparr}}class m extends l{run(t){const e=t.length;for(let s=0;s<e-1;s++){for(let r=s;r<e-s-1;r++)t[r]>t[r+1]&&([t[r],t[r+1]]=[t[r+1],t[r]],this.swparr.push({e1:r,e2:r+1}));for(let r=e-s-1;r>s;r--)t[r]<t[r-1]&&([t[r],t[r-1]]=[t[r-1],t[r]],this.swparr.push({e1:r,e2:r-1}))}return this.swparr}}class g extends l{run(t){return this.divide(t,0,t.length-1),this.swparr}divide(t,e,s){const r=t[e];let n=e+1,i=s;for(;n<=i;){for(;t[n]<r;)n++;for(;t[i]>r;)i--;n<=i&&([t[i],t[n]]=[t[n],t[i]],this.swparr.push({e1:i,e2:n}))}e<s&&([t[e],t[i]]=[t[i],t[e]],this.swparr.push({e1:e,e2:i}),this.divide(t,e,i-1),this.divide(t,i+1,s))}}class b extends l{run(t){const e=t.length;for(let s=Math.floor(e/2);s>=0;s--)this.heapify(t,s,e);for(let s=e-1;s>0;s--)[t[0],t[s]]=[t[s],t[0]],this.swparr.push({e1:0,e2:s}),this.heapify(t,0,s);return this.swparr}heapify(t,e,s){const r=2*e+1,n=2*e+2;let i=e;r<s&&t[i]<t[r]&&(i=r),n<s&&t[i]<t[n]&&(i=n),i!==e&&([t[i],t[e]]=[t[e],t[i]],this.swparr.push({e1:i,e2:e}),this.heapify(t,i,s))}}class w extends l{run(t){return this.divide(t,0,t.length-1),this.subarr}merge(t,e,s,r){const n=[];let i=e,o=s+1;for(;i<=s&&o<=r;){const e=t[i]<t[o]?t[i++]:t[o++];n.push(e)}if(i<=s)for(let e=i;e<=s;e++)n.push(t[e]);else for(let e=o;e<=r;e++)n.push(t[e]);for(let s=e;s<=r;s++)t[s]=n[s-e],this.subarr.push({idx:s,value:t[s]})}divide(t,e,s){if(e<s){const r=Math.floor((e+s)/2);this.divide(t,e,r),this.divide(t,r+1,s),this.merge(t,e,r,s)}}}class y extends l{run(t){const e=Array.from(Array(10),(()=>[]));for(let s=0;s<3;s++){t.forEach((t=>{const r=Math.floor(t/Math.pow(10,s)%10);e[r].push(t)}));let r=0;e.forEach((e=>{for(;e.length;)t[r++]=e.shift(),this.subarr.push({idx:r-1,value:t[r-1]})}))}return this.subarr}}class v extends l{run(t){const e=t.length;let s=Math.floor(t.length/2);for(;s>0;){for(let r=s;r<e;r++){const e=t[r];let n;for(n=r;n>=s&&t[n-s]>e;n-=s)t[n]=t[n-s],this.subarr.push({idx:n,value:t[n-s]});t[n]=e,this.subarr.push({idx:n,value:e})}s=Math.floor(s/2)}return this.subarr}}class S extends r{constructor({target:t}){super({target:t,state:{compareCount:0,totalCompareCount:0}}),this.sortType="quick"}render(){const t=h.state.stickLength,{compareCount:e,totalCompareCount:s}=this.$state,r=this.sortType;return`\n      <aside>\n        <div>길이: ${t}</div>\n        <div>비교횟수: ${e}</div>\n        <div>진행률: ${0===s?0:Math.floor((e+1)/s*100)}%</div>\n      </aside>    \n      <aside>\n        <div>\n          <select name="sort-type" class="select_sort_type" style="width:100%; border-radius: 5px">\n            ${[["quick","Quick Sort"],["selection","Selection Sort"],["insertion","Insertion Sort"],["heap","Heap Sort"],["bubble","Bubble Sort"],["merge","Merge Sort"],["cocktail","Cocktail Sort"],["radix","Radix Sort"],["shell","Shell Sort"]].map((([t,e])=>`<option ${t===r?"selected":""} value=${t}>${e}</option>`)).join("")}\n          </select>\n        </div>\n        <div class='button_wrapper' >\n          <button class="run-btn">run</button>\n          <button class="shuffle-btn">shuffle</button>\n        </div>\n      </aside>\n    `}bindEvent(){this.$target.addEventListener("click",(t=>{const{target:e}=t;e.classList.contains("run-btn")&&this.onClickRun(),e.classList.contains("shuffle-btn")&&this.onClickShuffle()})),this.$target.addEventListener("change",(t=>{const{target:e}=t;e===document.querySelector('select[name="sort-type"]')&&(this.sortType=e.value)}))}async onClickRun(){const t=[...h.state.shuffledList],e=(t=>{switch(this.sortType){case"selection":default:return new d;case"insertion":return new p;case"bubble":return new f;case"cocktail":return new m;case"quick":return new g;case"heap":return new b;case"merge":return new w;case"radix":return new y;case"shell":return new v}})().run([...t]),s=e.entries();for(const[r,n]of s){let s;await u(10),n.hasOwnProperty("e1")&&n.hasOwnProperty("e2")?s=this.sortSwapList(n,t):n.hasOwnProperty("idx")&&n.hasOwnProperty("value")&&(s=this.sortSubList(n,t)),this.setState({compareCount:r,totalCompareCount:e.length}),h.commit(a,s)}}onClickShuffle(){const t=n().length,e=i(Array.from({length:t},((t,e)=>e+1)));h.commit(a,e),this.setState({compareCount:0,totalCompareCount:0})}sortSwapList({e1:t,e2:e},s){const r=s[t];return s[t]=s[e],s[e]=r,[...s]}sortSubList({idx:t,value:e},s){return s[t]=e,[...s]}}new class extends r{constructor({target:t}){super({target:t});const e=document.querySelector("header"),s=document.querySelector("main");new S({target:e}),new c({target:s})}render(){return"\n      <header></header>\n      <main></main>\n    "}}({target:document.getElementById("root")})})();